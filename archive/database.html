<html>
<head>
<title>database</title>

<link href="style.css" rel="stylesheet">

<script src="jquery-3.3.1.min.js"></script>

<script type="text/javascript">
$(document).ready(() => {
      $('#insertButton').click(() => {
    $.ajax({
      // all URLs are relative to http://localhost:3000/
      url: 'users',
      type: 'POST', // <-- this is POST, not GET
      data: {
              estate: $('#insertEstateBox').val(),
              price: $('#insertPriceBox').val(),
              rating: $('#insertRatingBox').val(),
              risks: $('#insertRisksBox').val(),
              house: $('#insertHouseBox').val()
            },
      success: (data) => {
        $('#status').html(data.message);
        goBack();
      }
    });
  });
  // define a generic Ajax error handler:
  // http://api.jquery.com/ajaxerror/
  $(document).ajaxError(() => {
    $('#status').html('Error: unknown ajaxError!');
  });

});
</script>


<body>
<h1>Adding a new listing to HousingTransparency</h1>
<hr/>
  Property Name: <input id="insertEstateBox" type="text" size="20"/>
  <br>
  Price Range: <input id="insertPriceBox" type="text" size="20"/>
  <br>
  Rating: <input id="insertRatingBox" type="text" size="20"/>
  <br>
  Liquefaction Risk: <input id="insertRisksBox" type="text" size="20"/>
  <br>
  Image (e.g. LaJolla.jpg): <input id="insertHouseBox" type="text" size="20"/>
  <br>
  RatingInt: <input id="insertRatingIntBox" type="text" size="20"/>
  <br>
  <button id="insertButton">Add Listing and Return</button>
  <button onclick="goBack()"> Cancel</button>

<div id="status"></div>

</body>
</html>

<script>
function goBack() {
    window.history.back();
}
</script>